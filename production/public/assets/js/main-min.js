
function firstInit(t){let e=new Layout(t.config.Templates);e.pageLayout,e.createSortableNavItems(),new Navigation(t.config.Navigation).mainNavigation,new BodyBgImage(t.config.Partner.id).bodyBgImg,new PricingPlans(t.config.Plans).plansLayout,new TableBgColor(t.config.TableColor.id).tableBgColor}function updateInit(t,e){if(JSON.stringify(t.config.Templates)!=JSON.stringify(e.config.Templates)){let t=new Layout(e.config.Templates);t.resetActiveTemplate(),t.pageLayout,t.altAsideMenuButton();let i,s=new Navigation(e.config.Navigation),a=document.querySelector(".grid__header");(i=s.reorderNavigationLinks()).observe(a)}for(let i=0;i<t.config.Navigation.length;i++)if(t.config.Navigation[i].itemName!=e.config.Navigation[i].itemName){let t=new Navigation(e.config.Navigation);t.resetNavigation(),t.mainNavigation}if(t.config.Partner.id!=e.config.Partner.id){let t=new BodyBgImage(e.config.Partner.id);t.resetBodyBackgroundImage(),t.bodyBgImg}if(t.config.TableColor.id!=e.config.TableColor.id){let t=new TableBgColor(e.config.TableColor.id);t.resetUserTableBackgroundColor(),t.tableBgColor}}document.addEventListener("DOMContentLoaded",()=>{let t=new FirestoreDatabase;t.firestoreDbOn,t.firebaseDbSettup().collection("layoutConfig").onSnapshot(t=>{t.docChanges().forEach(t=>{if("added"==t.type){firstInit(t.doc.data())}else if("modified"==t.type){let e=t.doc.data();updateInit(window.oldData,e)}})})});class FirestoreDatabase{constructor(){this.config={apiKey:"AIzaSyCroggHw_3jdK0aN63EKiapu8N4nsraE8c",authDomain:"dynamicpagelayout.firebaseapp.com",databaseURL:"https://dynamicpagelayout.firebaseio.com",projectId:"dynamicpagelayout",storageBucket:"dynamicpagelayout.appspot.com",messagingSenderId:"280766259425"},this.db}get firestoreDbOn(){this.firestoreDbInit()}firestoreDbInit(){firebase.initializeApp(this.config)}firebaseDbSettup(){return this.db=firebase.firestore(),this.db.settings({timestampsInSnapshots:!0}),this.db}updateDbData(t){this.firebaseDbSettup().collection("layoutConfig").doc("MtyYfGHe9cbaHlauDqCv").update(t)}getDbData(){return this.firebaseDbSettup().collection("layoutConfig").get().then(t=>t.docs)}}class Layout extends FirestoreDatabase{constructor(t){super(),this.templatesConfig=t,this.layoutElements=this.getPageElements(),this.settingBtn,this.formModal,this.form,this.formData,this.formDataObject={},this.activeTemplate,this.navigation,this.sortListItem,this.sortListItemLockedClassName,this.isSortListItemCheckboxChecked,this.sortListItemCheckbox,this.sortListItems,this.sortListCheckedItemObject={},this.sortListCheckedItemArray=[],this.newNavLinksOrder,this.asideSettingLink}get pageLayout(){this.resetActiveTemplate(),this.setActiveTemplate(this.templatesConfig),this.altAsideMenuButton(),this.settingsButton(),this.asideSettingButton(),this.modalCloseButton(),this.modalFormSave()}getPageElements(){return document.querySelectorAll(".grid__header, .grid__content, .altaside, .altaside__btn, .grid__aside, .grid__footer, .grid__footer--notification, .grid__footer--settings, .modal, .modal__close--btn, .modal__form, .modal__form--list, .modal__form--btn")}convertToString(t){return new String(t)}setActiveTemplate(t){for(let e in t)t[e].isActive&&(this.layoutElements[0].classList.add(this.convertToString(t[e].headerClass)),this.layoutElements[1].classList.add(this.convertToString(t[e].contentClass)),this.layoutElements[4].classList.add(this.convertToString(t[e].asideClass)),this.layoutElements[5].classList.add(this.convertToString(t[e].footerClass)),"template-4"===e?(this.layoutElements[2].classList.remove("altaside__remove"),this.layoutElements[3].classList.remove("altaside__btn--remove")):(this.layoutElements[2].classList.add("altaside__remove"),this.layoutElements[3].classList.add("altaside__btn--remove")))}resetActiveTemplate(){this.layoutElements[0].classList.remove("grid__header-footer--pull","grid__span--allwidth","null","."),this.layoutElements[1].classList.remove("grid__span--allwidth","undefined","null","."),this.layoutElements[4].classList.remove("grid__aside--left","grid__aside--top","grid__aside--left--top","grid__aside--remove","null","."),this.layoutElements[5].classList.remove("grid__header-footer--pull","grid__span--allwidth","null",".")}isActiveTemplate(t){for(let e in t)if(t[e].isActive)return e}altAsideMenuButton(){this.layoutElements[3].addEventListener("click",function(){this.layoutElements[2].classList.toggle("altaside__open"),this.layoutElements[3].classList.toggle("altaside__btn--open")}.bind(this))}settingsButton(){this.layoutElements[7].addEventListener("click",function(){this.getDbData().then(t=>{t.forEach(t=>{window.oldData=t.data()})}),this.layoutElements[8].classList.add("open"),this.layoutElements[6].innerText="",this.layoutElements[6].classList.remove("show"),this.formDataObject={}}.bind(this))}asideSettingButton(){this.asideSettingLink=document.querySelectorAll("#pageSettings"),Array.from(this.asideSettingLink).forEach(t=>{t.addEventListener("click",function(){event.preventDefault(),this.getDbData().then(t=>{t.forEach(t=>{window.oldData=t.data()})}),this.layoutElements[8].classList.add("open"),this.layoutElements[6].innerText="",this.layoutElements[6].classList.remove("show"),this.formDataObject={}}.bind(this))})}modalCloseButton(){this.layoutElements[9].addEventListener("click",function(){this.layoutElements[8].classList.remove("open")}.bind(this))}createSortableNavItems(){this.getDbData().then(t=>{t.forEach(t=>{this.navigation=t.data().config.Navigation;for(let t=0;t<this.navigation.length;t++)this.sortListItemLockedClassName="true"==this.navigation[t].locked?"modal__form--list--item--locked":"modal__form--list--item",this.isSortListItemCheckboxChecked="true"==this.navigation[t].locked,this.sortListItem=document.createElement("li"),this.sortListItem.setAttribute("class","modal__form--list--item"),this.sortListItem.classList.add(this.sortListItemLockedClassName),this.sortListItem.setAttribute("data-locked",this.navigation[t].locked),this.sortListItem.innerText=this.navigation[t].itemName,this.sortListItemCheckbox=document.createElement("input"),this.sortListItemCheckbox.setAttribute("type","checkbox"),this.sortListItemCheckbox.setAttribute("id",`item-checkbox-${t}`),this.sortListItemCheckbox.setAttribute("class","modal__form--list--item--checkbox"),this.sortListItemCheckbox.setAttribute("title","Lock this item on the fix nav position"),this.sortListItemCheckbox.checked=this.isSortListItemCheckboxChecked,this.sortListItem.appendChild(this.sortListItemCheckbox),this.layoutElements[11].appendChild(this.sortListItem);this.setLockedNavItem()})})}setLockedNavItem(){this.sortListItemCheckbox=document.getElementsByClassName("modal__form--list--item--checkbox");for(let t=0;t<this.sortListItemCheckbox.length;t++)this.sortListItemCheckbox[t].addEventListener("click",function(t){t.target.checked?(t.target.parentElement.dataset.locked=!0,t.target.parentElement.classList.add("modal__form--list--item--locked")):(t.target.parentElement.dataset.locked=!1,t.target.parentElement.classList.remove("modal__form--list--item--locked"))}.bind(this))}getListItemsCheckedOrder(){this.sortListItems=document.querySelectorAll(".modal__form--list--item");for(let t=0;t<this.sortListItems.length;t++)this.sortListCheckedItemObject.indexPosition=t,this.sortListCheckedItemObject.itemName=this.sortListItems[t].innerText,this.sortListCheckedItemObject.locked=this.sortListItems[t].dataset.locked,this.sortListCheckedItemArray.push(this.sortListCheckedItemObject),this.sortListCheckedItemObject={};return this.sortListCheckedItemArray}modalSortableLinks(){let t=[],e={},i=[];return Sortable.create(this.layoutElements[11],{onEnd:function(s){for(let i=0;i<s.target.childNodes.length;i++)e.indexPosition=i+1,e.itemName=s.target.childNodes[i].innerText,e.locked=s.target.childNodes[i].dataset.locked,t.push(e),e={};i.push(t),t=[]}}),i}modalFormSave(){this.newNavLinksOrder=this.modalSortableLinks(),this.layoutElements[10].addEventListener("submit",function(t){t.preventDefault(),this.form=this.layoutElements[10],this.formData=new FormData(this.form),this.getDbData().then(t=>{t.forEach(t=>{this.activeTemplate=this.isActiveTemplate(t.data().config.Templates),this.formDataObject[`config.Templates.${this.activeTemplate}.isActive`]=!1,this.formDataObject[`config.Templates.${this.formData.get("templates")}.isActive`]=!0,this.formDataObject["config.Partner.id"]=Number(this.formData.get("background-image")),this.formDataObject["config.TableColor.id"]=Number(this.formData.get("table-background-color")),this.newNavLinksOrder.length>0?this.formDataObject["config.Navigation"]=this.newNavLinksOrder[this.newNavLinksOrder.length-1]:this.formDataObject["config.Navigation"]=this.getListItemsCheckedOrder(),void 0===this.formDataObject["config.Navigation"]&&delete this.formDataObject["config.Navigation"],this.updateDbData(this.formDataObject),this.layoutElements[6].innerText="template-0"!=this.formData.get("templates")?this.formData.get("templates"):"Default Template",this.layoutElements[6].classList.add("show"),this.layoutElements[8].classList.remove("open"),this.newNavLinksOrder=[],this.sortListCheckedItemArray=[]})})}.bind(this))}}class Navigation{constructor(t){this.navigationConfig=t,this.layoutElements=this.getPageElements(),this.navigation,this.headerNumberOfItems,this.navigationDropdown,this.navChildernElements,this.navigationLink,this.navDropdown,this.headerWidth,this.headerElement,this.resizeObserver,this.removeFromNavigation,this.removeFromDropdown,this.removedElementFromDropdown,this.removedElementFromNavigation}get mainNavigation(){this.setNavigationOrder(this.navigationConfig),this.setMainNavigation(this.navigationConfig),this.openNavDropdown()}getPageElements(){return document.querySelectorAll(".grid__header, .gird__header--navigation, .gird__header--navigation--dropdown")}setMainNavigation(t){this.headerNumberOfItems=this.getHeaderWidth(),this.navigation=this.layoutElements[1],this.headerNumberOfItems=this.getHeaderWidth(),this.navigationDropdown=document.createElement("span"),this.navigationDropdown.setAttribute("class","gird__header--navigation--dropdown");for(let e in t)this.navChildernElements=this.navigation.childNodes.length,this.navigationLink=document.createElement("a"),this.navigationLink.setAttribute("href","#"),this.navigationLink.setAttribute("class","gird__header--navigation--link"),this.navigationLink.innerText=t[e].itemName,this.navChildernElements<this.headerNumberOfItems?this.navigation.appendChild(this.navigationLink):this.navigationDropdown.appendChild(this.navigationLink);this.navigation.appendChild(this.navigationDropdown)}openNavDropdown(){this.navDropdown=document.querySelector(".gird__header--navigation--dropdown"),this.navDropdown.addEventListener("click",function(){this.navDropdown.classList.toggle("gird__header--navigation--dropdown--open")}.bind(this))}getHeaderWidth(){return this.headerWidth=this.layoutElements[0].offsetWidth,Math.floor(this.headerWidth/100-1)}setNavigationOrder(t){t.sort(function(t,e){return t.locked<e.locked?1:t.locked>e.locked?-1:t.indexPosition>e.indexPosition?1:t.indexPosition<e.indexPosition?-1:0})}resetNavigation(){for(this.navigation=this.layoutElements[1];this.navigation.firstChild;)this.navigation.removeChild(this.navigation.firstChild)}reorderNavigationLinks(){return this.resizeObserver=new ResizeObserver(t=>{if(this.navigation=document.getElementsByClassName("gird__header--navigation"),this.headerNumberOfItems=this.getHeaderWidth(),this.navDropdown=document.getElementsByClassName("gird__header--navigation--dropdown"),this.removeFromDropdown=this.headerNumberOfItems-this.navigation[0].children.length,this.removeFromNavigation=this.navigation[0].children.length-this.headerNumberOfItems,this.navigation[0].children.length<this.headerNumberOfItems){if(this.navDropdown[0].hasChildNodes())for(let t=0;t<=this.navDropdown[0].childNodes.length;t++)t<=this.removeFromDropdown&&(this.removedElementFromDropdown=this.navDropdown[0].removeChild(this.navDropdown[0].firstChild),this.navigation[0].insertBefore(this.removedElementFromDropdown,this.navDropdown[0]))}else if(this.navigation[0].children.length>this.headerNumberOfItems&&this.navigation[0].hasChildNodes()){let t=[];for(let e=0;e<this.removeFromNavigation;e++)t.push(this.navigation[0].removeChild(this.navigation[0].lastElementChild));for(let e=0;e<t.length-1;e++)t[0].insertBefore(t[e+1],t[0].children[0]);this.navigation[0].appendChild(t[0])}}),this.resizeObserver}}class BodyBgImage{constructor(t){this.Id=t,this.htmlBody=document.querySelector("body")}get bodyBgImg(){this.setBodyBgImg(this.Id)}setBodyBgImg(t){switch(t){case 0:this.htmlBody.classList.remove("background-1","background-2","background-3");break;case 1:this.htmlBody.classList.add("background-1");break;case 2:this.htmlBody.classList.add("background-2");break;case 3:this.htmlBody.classList.add("background-3");break;default:return!1}}resetBodyBackgroundImage(){this.htmlBody.classList.remove("background-1","background-2","background-3")}}class TableBgColor{constructor(t){this.colorId=t,this.table=document.querySelector(".bettingTable")||document.querySelector(".userTable")}get tableBgColor(){this.setTableBgColor(this.colorId)}setTableBgColor(t){switch(t){case 0:this.table.classList.remove("color-1","color-2","color-3");break;case 1:this.table.classList.add("color-1");break;case 2:this.table.classList.add("color-2");break;case 3:this.table.classList.add("color-3");break;default:return!1}}resetUserTableBackgroundColor(){this.table.classList.remove("color-1","color-2","color-3")}}class CreateElement{constructor(){this.element}get createdElement(){return this.buildElement()}buildElement(t,e,i=null){return this.element=document.createElement(t),this.element.setAttribute("class",e),this.element.innerHTML=i,this.element}}class PricingPlans extends CreateElement{constructor(t){super(),this.plansConfig=t,this.pricingPlansMainWrapper=document.querySelector(".pricing"),this.pricingPlansContainer,this.pricingPlansTitle,this.pricingPlansPrice,this.pricingPlansList,this.pricingPlansListItem,this.pricingPlansButton}get plansLayout(){this.settingPlansLayout(this.plansConfig)}settingPlansLayout(t){this.setPlansOrder(t);for(let e in t){this.pricingPlansContainer=this.buildElement("div","pricing__plan"),this.pricingPlansTitle=this.buildElement("div","pricing__plan--title",t[e].title),this.pricingPlansPrice=this.buildElement("div","pricing__plan--price","$"+t[e].price),this.pricingPlansList=this.buildElement("div","pricing__plan--list"),this.pricingPlansButton=this.buildElement("div","pricing__plan--btn",t[e].btnText);for(let i=0;i<t[e].items.length;i++)this.pricingPlansListItem=this.buildElement("div","pricing__plan--list--item",t[e].items[i]),this.pricingPlansList.appendChild(this.pricingPlansListItem);this.pricingPlansContainer.appendChild(this.pricingPlansTitle),this.pricingPlansContainer.appendChild(this.pricingPlansPrice),this.pricingPlansContainer.appendChild(this.pricingPlansList),this.pricingPlansContainer.appendChild(this.pricingPlansButton),this.pricingPlansMainWrapper.appendChild(this.pricingPlansContainer)}}setPlansOrder(t){Object.keys(t).sort(function(t,e){return t.order-e.order})}}